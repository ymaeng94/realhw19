{"ast":null,"code":"import _objectSpread from\"/Users/yurimmaeng/Desktop/CODE/19HW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/yurimmaeng/Desktop/CODE/19HW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Nav from\"./Nav\";import DataContext from\"../utils/DataContext\";import API from\"../utils/API\";var DataArea=function DataArea(){var _useState=useState({users:[],order:\"aescend\",filteredUsers:[],headings:[{name:\"name\",width:\"20%\",order:\"aescend\"},{name:\"phone\",width:\"25%\",order:\"aescend\"},{name:\"email\",width:\"25%\",order:\"aescend\"}]}),_useState2=_slicedToArray(_useState,2),developerState=_useState2[0],setDeveloperState=_useState2[1];var handleSort=function handleSort(heading){var currentOrder=developerState.headings.filter(function(elem){return elem.name===heading;}).map(function(elem){return elem.order;}).toString();if(currentOrder===\"aescend\"){currentOrder=\"ascend\";}else{currentOrder=\"aescend\";}var compareFnc=function compareFnc(a,b){if(currentOrder===\"ascend\"){// for missing values\nif(a[heading]===undefined){return 1;}else if(b[heading]===undefined){return-1;}// numerically\nelse if(heading===\"name\"){return b[heading].first.localeCompare(a[heading].first);}else if(heading===\"dob\"){return b[heading].age-a[heading].age;}else{return b[heading].localeCompare(a[heading]);}}};var sortedUsers=developerState.filteredUsers.sort(compareFnc);var updatedHeadings=developerState.headings.map(function(elem){elem.order=elem.name===heading?currentOrder:elem.order;return elem;});setDeveloperState(_objectSpread(_objectSpread({},developerState),{},{filteredUsers:sortedUsers,headings:updatedHeadings}));};var handleSearchChange=function handleSearchChange(event){var filter=event.target.value;var filteredList=developerState.users.filter(function(item){var values=item.name.first.toLowerCase()+\" \"+item.name.last.toLowerCase();if(values.indexOf(filter.toLowerCase())!==-1){return item;};});setDeveloperState(_objectSpread(_objectSpread({},developerState),{},{filteredUsers:filteredList}));};useEffect(function(){API.getUsers().then(function(results){setDeveloperState(_objectSpread(_objectSpread({},developerState),{},{users:results.data.results,filteredUsers:results.data.results}));});},[]);return/*#__PURE__*/React.createElement(DataContext.Provider,{value:{developerState:developerState,handleSearchChange:handleSearchChange,handleSort:handleSort}},/*#__PURE__*/React.createElement(Nav,null),/*#__PURE__*/React.createElement(\"div\",{className:\"data-area\"},developerState.filteredUsers.length>10));};export default DataArea;","map":{"version":3,"sources":["/Users/yurimmaeng/Desktop/CODE/19HW/src/components/DataArea.js"],"names":["React","useState","useEffect","Nav","DataContext","API","DataArea","users","order","filteredUsers","headings","name","width","developerState","setDeveloperState","handleSort","heading","currentOrder","filter","elem","map","toString","compareFnc","a","b","undefined","first","localeCompare","age","sortedUsers","sort","updatedHeadings","handleSearchChange","event","target","value","filteredList","item","values","toLowerCase","last","indexOf","getUsers","then","results","data","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Nav from \"./Nav\";\nimport DataContext from \"../utils/DataContext\";\nimport API from \"../utils/API\";\n\n\nconst DataArea = () => {\n  const [developerState, setDeveloperState] = useState({\n    users: [],\n    order: \"aescend\",\n    filteredUsers: [],\n    headings: [\n      { name: \"name\", width: \"20%\", order: \"aescend\" },\n      { name: \"phone\", width: \"25%\", order: \"aescend\" },\n      { name: \"email\", width: \"25%\", order: \"aescend\" },\n    ]\n  });\n\n\n  const handleSort = heading => {\n    let currentOrder = developerState.headings\n      .filter(elem => elem.name === heading)\n      .map(elem => elem.order)\n      .toString();\n\n    if (currentOrder === \"aescend\") {\n      currentOrder = \"ascend\";\n    } else {\n      currentOrder = \"aescend\";\n    }\n\n    const compareFnc = (a, b) => {\n      if (currentOrder === \"ascend\") {\n        // for missing values\n        if (a[heading] === undefined) {return 1;} \n        else if (b[heading] === undefined) {return -1;}\n\n        // numerically\n        else if (heading === \"name\") {return b[heading].first.localeCompare(a[heading].first);}\n        else if (heading === \"dob\") {return b[heading].age - a[heading].age;}\n        else {return b[heading].localeCompare(a[heading]);}\n      }\n    };\n\n    const sortedUsers = developerState.filteredUsers.sort(compareFnc);\n    const updatedHeadings = developerState.headings.map(elem => {\n      elem.order = elem.name === heading ? currentOrder : elem.order;\n      return elem;\n    });\n\n    setDeveloperState({\n      ...developerState,\n      filteredUsers: sortedUsers,\n      headings: updatedHeadings\n    });\n  };\n\n  const handleSearchChange = event => {\n    const filter = event.target.value;\n    const filteredList = developerState.users.filter(item => {\n    let values = item.name.first.toLowerCase() + \" \" + item.name.last.toLowerCase();\n    if(values.indexOf(filter.toLowerCase()) !== -1){\n    return item\n    };\n    });\n    setDeveloperState({ ...developerState, filteredUsers: filteredList });\n  };\n\n  useEffect(() => {\n    API.getUsers().then(results => {\n      setDeveloperState({\n        ...developerState,\n        users: results.data.results,\n        filteredUsers: results.data.results\n      });\n    });\n  }, []);\n\n  return (\n    <DataContext.Provider\n      value={{ developerState, handleSearchChange, handleSort }}\n    >\n      <Nav />\n      <div className=\"data-area\">\n        {developerState.filteredUsers.length > 10 }\n      </div>\n    </DataContext.Provider>\n  );\n};\n\nexport default DataArea;"]},"metadata":{},"sourceType":"module"}